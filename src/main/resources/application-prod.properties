# í”„ë¡œë•ì…˜ í™˜ê²½ ì „ìš© ì„¤ì •

# ë°ì´í„°ë² ì´ìŠ¤ (Docker í™˜ê²½ ë˜ëŠ” ì™¸ë¶€ DB)
# GitHub Actionsì—ì„œ í™˜ê²½ë³€ìˆ˜ë¡œ ì£¼ì…ë©ë‹ˆë‹¤
spring.datasource.url=jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
spring.datasource.username=${POSTGRES_USER}
spring.datasource.password=${POSTGRES_PASSWORD}

# HikariCP Connection Pool Settings (í”„ë¡œë•ì…˜ ìµœì í™”)
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# Tomcat Thread Pool Settings (í”„ë¡œë•ì…˜ ìµœì í™”)
server.tomcat.threads.max=300
server.tomcat.threads.min-spare=20
server.tomcat.max-connections=10000
server.tomcat.accept-count=150
server.tomcat.connection-timeout=20000

# JPA ì„¤ì • (í”„ë¡œë•ì…˜ - DDL ìë™ ë³€ê²½ ë¹„í™œì„±í™”)
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.format_sql=false

# ===== ğŸš€ ë°°ì¹˜ ì²˜ë¦¬ ì„±ëŠ¥ ìµœì í™” =====
# Hibernate Batch Insert/Update
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Batch Fetch (N+1 ë¬¸ì œ í•´ê²°)
spring.jpa.properties.hibernate.default_batch_fetch_size=50

# Statement Caching
spring.jpa.properties.hibernate.jdbc.use_streams_for_binary=true
spring.jpa.properties.hibernate.query.plan_cache_max_size=2048
spring.jpa.properties.hibernate.query.plan_parameter_metadata_max_size=128

# ë¡œê·¸ ì„¤ì • (ìš´ì˜ - ìµœì†Œí™”)
logging.level.root=INFO
logging.level.com.example.AOD=INFO
logging.level.com.example.AOD.service.similarity=INFO
logging.level.org.springframework=WARN
logging.level.org.springframework.jdbc.core=WARN

# ë¡œê·¸ íŒŒì¼ ì„¤ì •
logging.file.name=/var/log/aod/application.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# TMDB API (í™˜ê²½ë³€ìˆ˜ë¡œ ì£¼ì… ê¶Œì¥)
tmdb.api.key=${TMDB_API_KEY}

# Steam API (í™˜ê²½ë³€ìˆ˜ë¡œ ì£¼ì… ê¶Œì¥)
steam.api.key=${STEAM_API_KEY}

# OpenAI API (í™˜ê²½ë³€ìˆ˜ë¡œ í•„ìˆ˜ ì£¼ì…)
openai.api.key=${OPENAI_API_KEY}
openai.api.url=https://api.openai.com/v1/chat/completions

# ì¶”ì²œ ì‹œìŠ¤í…œ ì„¤ì •
recommendation.traditional.max-items-per-category=10
recommendation.llm.max-tokens=1500
recommendation.llm.temperature=0.7
recommendation.llm.model=gpt-3.5-turbo

# ìºì‹œ ì„¤ì •
spring.cache.type=simple
spring.cache.cache-names=traditional-recommendations,llm-recommendations,platform-list

# ë„ë©”ì¸ë³„ í”Œë«í¼ ëª©ë¡ (ê³ ì • ì„¤ì •)
app.platforms.movie=TMDB_MOVIE
app.platforms.tv=TMDB_TV
app.platforms.game=Steam
app.platforms.webtoon=NaverWebtoon
app.platforms.webnovel=NaverSeries,KakaoPage
