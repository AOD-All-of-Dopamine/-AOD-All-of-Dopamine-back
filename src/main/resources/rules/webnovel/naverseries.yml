platformName: NaverSeries
domain: WEBNOVEL
schemaVersion: 3

fieldMappings:
  # === Contents (마스터 공통) ===
  title: master_title
  imageUrl: poster_image_url
  synopsis: synopsis

  # === webnovel_contents (도메인 코어) ===
  author: domain.author
  publisher: domain.publisher
  ageRating: domain.age_rating
  genres: domain.genres
  # started_at은 실제 NaverSeries 데이터에 있다면 추가
  # startedAt: domain.started_at

  # === Platform_Data ===
  productUrl: platform.url
  titleId: platform.platform_specific_id

  # === Platform_Data.attributes (JSONB) ===

  # 기존 attributes
  status: platform.attributes.status
  rating: platform.attributes.rating
  downloadCount: platform.attributes.download_count
  commentCount: platform.attributes.comment_count

domainObjectMappings:
  author:
    targetField: author
    type: string
  publisher:
    targetField: publisher
    type: string
  age_rating:
    targetField: ageRating
    type: string
  genres:
    targetField: genres
    type: list
  started_at:
    targetField: startedAt
    type: date

normalizers:
  - type: strip_parentheses
    fields: [master_title]
  - type: collapse_spaces
    fields: [master_title]
  - type: nfkc
    fields: [master_title, domain.author, platform.attributes.publisher]