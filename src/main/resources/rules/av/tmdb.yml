# src/main/resources/rules/av/tmdb.yml

platformName: TMDB
domain: AV
schemaVersion: 3

fieldMappings:
  # === Master & Platform Mappings ===
  title: master_title              # 영화용
  name: master_title               # TV쇼용
  original_title: original_title   # 영화용
  original_name: original_title    # TV쇼용
  poster_image_url: poster_image_url
  overview: synopsis

  # === Domain Mappings (for domainDoc) ===
  av_type: domain.av_type
  id: domain.tmdb_id
  release_date: domain.release_date      # 영화용
  first_air_date: domain.release_date    # TV쇼용
  genres: domain.genres

  # === Platform Attributes ===
  watch_providers: platform.attributes.watch_providers
  runtime: platform.attributes.runtime                 # 영화용
  episode_run_time: platform.attributes.runtime        # TV쇼용
  number_of_seasons: platform.attributes.season_count
  cast: platform.attributes.cast
  crew: platform.attributes.crew

domainObjectMappings:
  av_type:
    targetField: avType
    type: string
  tmdb_id:
    targetField: tmdbId
    type: integer
  release_date:
    targetField: releaseDate
    type: date
  genres:
    targetField: genres
    type: list

normalizers:
  - type: collapse_spaces
    fields: [master_title, original_title]
  - type: nfkc
    fields: [master_title, original_title]